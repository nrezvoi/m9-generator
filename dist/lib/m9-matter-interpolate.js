'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _matterInterpolate = require('./matter-interpolate');

var _matterInterpolate2 = _interopRequireDefault(_matterInterpolate);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = m9matterInterpolate;


var EXCLUDE_PROPS = ['contents', 'mode'];

function m9matterInterpolate() {
  return function (files, metalsmith, done) {
    Object.keys(files).forEach(function (file) {
      return processFileMeta(files[file], metalsmith.metadata());
    });
    done();
  };
}

function processFileMeta(fileMeta, metadata) {
  Object.keys(fileMeta).forEach(function (propName) {
    var propValue = fileMeta[propName];
    if (EXCLUDE_PROPS.includes(propName)) return;
    if (typeof propValue !== 'string') return;
    fileMeta[propName] = (0, _matterInterpolate2.default)(propValue, metadata);
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9saWIvbTktbWF0dGVyLWludGVycG9sYXRlLmpzIl0sIm5hbWVzIjpbIm05bWF0dGVySW50ZXJwb2xhdGUiLCJFWENMVURFX1BST1BTIiwiZmlsZXMiLCJtZXRhbHNtaXRoIiwiZG9uZSIsIk9iamVjdCIsImtleXMiLCJmb3JFYWNoIiwicHJvY2Vzc0ZpbGVNZXRhIiwiZmlsZSIsIm1ldGFkYXRhIiwiZmlsZU1ldGEiLCJwcm9wVmFsdWUiLCJwcm9wTmFtZSIsImluY2x1ZGVzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTs7Ozs7O2tCQUNlQSxtQjs7O0FBRWYsSUFBTUMsZ0JBQWdCLENBQ3BCLFVBRG9CLEVBRXBCLE1BRm9CLENBQXRCOztBQUtBLFNBQVNELG1CQUFULEdBQWdDO0FBQzlCLFNBQU8sVUFBQ0UsS0FBRCxFQUFRQyxVQUFSLEVBQW9CQyxJQUFwQixFQUE2QjtBQUNsQ0MsV0FBT0MsSUFBUCxDQUFZSixLQUFaLEVBQW1CSyxPQUFuQixDQUEyQjtBQUFBLGFBQ3pCQyxnQkFBZ0JOLE1BQU1PLElBQU4sQ0FBaEIsRUFBNkJOLFdBQVdPLFFBQVgsRUFBN0IsQ0FEeUI7QUFBQSxLQUEzQjtBQUdBTjtBQUNELEdBTEQ7QUFNRDs7QUFFRCxTQUFTSSxlQUFULENBQTBCRyxRQUExQixFQUFvQ0QsUUFBcEMsRUFBOEM7QUFDNUNMLFNBQU9DLElBQVAsQ0FBWUssUUFBWixFQUFzQkosT0FBdEIsQ0FBOEIsb0JBQVk7QUFDeEMsUUFBTUssWUFBWUQsU0FBU0UsUUFBVCxDQUFsQjtBQUNBLFFBQUlaLGNBQWNhLFFBQWQsQ0FBdUJELFFBQXZCLENBQUosRUFBc0M7QUFDdEMsUUFBSSxPQUFPRCxTQUFQLEtBQXFCLFFBQXpCLEVBQW1DO0FBQ25DRCxhQUFTRSxRQUFULElBQXFCLGlDQUFrQkQsU0FBbEIsRUFBNkJGLFFBQTdCLENBQXJCO0FBQ0QsR0FMRDtBQU1EIiwiZmlsZSI6Im05LW1hdHRlci1pbnRlcnBvbGF0ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtYXR0ZXJJbnRlcnBvbGF0ZSBmcm9tICcuL21hdHRlci1pbnRlcnBvbGF0ZSdcbmV4cG9ydCBkZWZhdWx0IG05bWF0dGVySW50ZXJwb2xhdGVcblxuY29uc3QgRVhDTFVERV9QUk9QUyA9IFtcbiAgJ2NvbnRlbnRzJyxcbiAgJ21vZGUnXG5dXG5cbmZ1bmN0aW9uIG05bWF0dGVySW50ZXJwb2xhdGUgKCkge1xuICByZXR1cm4gKGZpbGVzLCBtZXRhbHNtaXRoLCBkb25lKSA9PiB7XG4gICAgT2JqZWN0LmtleXMoZmlsZXMpLmZvckVhY2goZmlsZSA9PiAoXG4gICAgICBwcm9jZXNzRmlsZU1ldGEoZmlsZXNbZmlsZV0sIG1ldGFsc21pdGgubWV0YWRhdGEoKSlcbiAgICApKVxuICAgIGRvbmUoKVxuICB9XG59XG5cbmZ1bmN0aW9uIHByb2Nlc3NGaWxlTWV0YSAoZmlsZU1ldGEsIG1ldGFkYXRhKSB7XG4gIE9iamVjdC5rZXlzKGZpbGVNZXRhKS5mb3JFYWNoKHByb3BOYW1lID0+IHtcbiAgICBjb25zdCBwcm9wVmFsdWUgPSBmaWxlTWV0YVtwcm9wTmFtZV1cbiAgICBpZiAoRVhDTFVERV9QUk9QUy5pbmNsdWRlcyhwcm9wTmFtZSkpIHJldHVyblxuICAgIGlmICh0eXBlb2YgcHJvcFZhbHVlICE9PSAnc3RyaW5nJykgcmV0dXJuXG4gICAgZmlsZU1ldGFbcHJvcE5hbWVdID0gbWF0dGVySW50ZXJwb2xhdGUocHJvcFZhbHVlLCBtZXRhZGF0YSlcbiAgfSlcbn1cbiJdfQ==