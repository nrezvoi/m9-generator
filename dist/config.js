'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _yargs = require('yargs');

var _loadConfigs = require('./lib/load-configs');

var _loadConfigs2 = _interopRequireDefault(_loadConfigs);

var _readPartialsDir = require('./lib/read-partials-dir');

var _readPartialsDir2 = _interopRequireDefault(_readPartialsDir);

var _configWebpack = require('./config-webpack');

var _configWebpack2 = _interopRequireDefault(_configWebpack);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const isGulpDebug = process.env.GULP_DEBUG === 'true';
const isProduction = process.env.NODE_ENV === 'production';
const isDevelopment = !isProduction;

const root = _yargs.argv.root;
const src = _path2.default.join(root, 'src');
const dst = _path2.default.join(root, 'build');

const DIR_PAGES = 'pages';
const DIR_CONTENT = 'content';
const DIR_HELPERS = 'helpers';
const DIR_PARTIALS = 'partials';
const DIR_LAYOUTS = 'layouts';
const DIR_SCRIPTS = 'scripts';
const DIR_STYLES = 'styles';
const DIR_ASSETS = 'assets';
const DIR_PUBLIC = 'public';
const TPL_ENGINE = 'handlebars';

let config = {
  isGulpDebug,
  isProduction,
  isDevelopment,
  paths: {
    root,
    src,
    dst,
    srcScripts: _path2.default.join(src, DIR_SCRIPTS)
  },
  htmlmin: {
    src: '*.html',
    options: {
      collapseWhitespace: true,
      removeRedundantAttributes: true,
      collapseBooleanAttributes: true,
      minifyJS: true,
      sortAttributes: true
    }
  },
  pages: {
    directory: _path2.default.join(src, DIR_PAGES)
  },
  contentDir: {
    directory: _path2.default.join(src, DIR_CONTENT),
    transformer: 'wordpress'
  },
  helpers: {
    directory: _path2.default.join(src, DIR_HELPERS)
  },
  layouts: {
    engine: TPL_ENGINE,
    directory: _path2.default.join(src, DIR_LAYOUTS),
    partials: _path2.default.join(src, DIR_PARTIALS)
  },
  inplace: {
    engineOptions: {
      partials: (0, _readPartialsDir2.default)(_path2.default.join(src, DIR_PARTIALS))
    }
  },
  copy: {
    src: _path2.default.join(src, DIR_PUBLIC, '**/*')
  },
  assets: {
    scripts: _path2.default.join(src, DIR_SCRIPTS, '*.js'),
    styles: _path2.default.join(src, DIR_STYLES, '*.css'),
    manifest: 'assets.json',
    publicPath: `/${DIR_ASSETS}/`,
    dst: _path2.default.join(dst, DIR_ASSETS)
  },
  dev: {
    host: 'localhost',
    webpackPort: 9000,
    browsersyncPort: 3000
  }
};

config = (0, _configWebpack2.default)(config);
(0, _loadConfigs2.default)(config, root);

exports.default = config;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jb25maWcuanMiXSwibmFtZXMiOlsiaXNHdWxwRGVidWciLCJwcm9jZXNzIiwiZW52IiwiR1VMUF9ERUJVRyIsImlzUHJvZHVjdGlvbiIsIk5PREVfRU5WIiwiaXNEZXZlbG9wbWVudCIsInJvb3QiLCJzcmMiLCJqb2luIiwiZHN0IiwiRElSX1BBR0VTIiwiRElSX0NPTlRFTlQiLCJESVJfSEVMUEVSUyIsIkRJUl9QQVJUSUFMUyIsIkRJUl9MQVlPVVRTIiwiRElSX1NDUklQVFMiLCJESVJfU1RZTEVTIiwiRElSX0FTU0VUUyIsIkRJUl9QVUJMSUMiLCJUUExfRU5HSU5FIiwiY29uZmlnIiwicGF0aHMiLCJzcmNTY3JpcHRzIiwiaHRtbG1pbiIsIm9wdGlvbnMiLCJjb2xsYXBzZVdoaXRlc3BhY2UiLCJyZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzIiwiY29sbGFwc2VCb29sZWFuQXR0cmlidXRlcyIsIm1pbmlmeUpTIiwic29ydEF0dHJpYnV0ZXMiLCJwYWdlcyIsImRpcmVjdG9yeSIsImNvbnRlbnREaXIiLCJ0cmFuc2Zvcm1lciIsImhlbHBlcnMiLCJsYXlvdXRzIiwiZW5naW5lIiwicGFydGlhbHMiLCJpbnBsYWNlIiwiZW5naW5lT3B0aW9ucyIsImNvcHkiLCJhc3NldHMiLCJzY3JpcHRzIiwic3R5bGVzIiwibWFuaWZlc3QiLCJwdWJsaWNQYXRoIiwiZGV2IiwiaG9zdCIsIndlYnBhY2tQb3J0IiwiYnJvd3NlcnN5bmNQb3J0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTs7OztBQUNBOztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7Ozs7O0FBRUEsTUFBTUEsY0FBY0MsUUFBUUMsR0FBUixDQUFZQyxVQUFaLEtBQTJCLE1BQS9DO0FBQ0EsTUFBTUMsZUFBZUgsUUFBUUMsR0FBUixDQUFZRyxRQUFaLEtBQXlCLFlBQTlDO0FBQ0EsTUFBTUMsZ0JBQWdCLENBQUNGLFlBQXZCOztBQUVBLE1BQU1HLE9BQU8sWUFBS0EsSUFBbEI7QUFDQSxNQUFNQyxNQUFNLGVBQUtDLElBQUwsQ0FBVUYsSUFBVixFQUFnQixLQUFoQixDQUFaO0FBQ0EsTUFBTUcsTUFBTSxlQUFLRCxJQUFMLENBQVVGLElBQVYsRUFBZ0IsT0FBaEIsQ0FBWjs7QUFFQSxNQUFNSSxZQUFZLE9BQWxCO0FBQ0EsTUFBTUMsY0FBYyxTQUFwQjtBQUNBLE1BQU1DLGNBQWMsU0FBcEI7QUFDQSxNQUFNQyxlQUFlLFVBQXJCO0FBQ0EsTUFBTUMsY0FBYyxTQUFwQjtBQUNBLE1BQU1DLGNBQWMsU0FBcEI7QUFDQSxNQUFNQyxhQUFhLFFBQW5CO0FBQ0EsTUFBTUMsYUFBYSxRQUFuQjtBQUNBLE1BQU1DLGFBQWEsUUFBbkI7QUFDQSxNQUFNQyxhQUFhLFlBQW5COztBQUVBLElBQUlDLFNBQVM7QUFDWHJCLGFBRFc7QUFFWEksY0FGVztBQUdYRSxlQUhXO0FBSVhnQixTQUFPO0FBQ0xmLFFBREs7QUFFTEMsT0FGSztBQUdMRSxPQUhLO0FBSUxhLGdCQUFZLGVBQUtkLElBQUwsQ0FBVUQsR0FBVixFQUFlUSxXQUFmO0FBSlAsR0FKSTtBQVVYUSxXQUFTO0FBQ1BoQixTQUFLLFFBREU7QUFFUGlCLGFBQVM7QUFDUEMsMEJBQW9CLElBRGI7QUFFUEMsaUNBQTJCLElBRnBCO0FBR1BDLGlDQUEyQixJQUhwQjtBQUlQQyxnQkFBVSxJQUpIO0FBS1BDLHNCQUFnQjtBQUxUO0FBRkYsR0FWRTtBQW9CWEMsU0FBTztBQUNMQyxlQUFXLGVBQUt2QixJQUFMLENBQVVELEdBQVYsRUFBZUcsU0FBZjtBQUROLEdBcEJJO0FBdUJYc0IsY0FBWTtBQUNWRCxlQUFXLGVBQUt2QixJQUFMLENBQVVELEdBQVYsRUFBZUksV0FBZixDQUREO0FBRVZzQixpQkFBYTtBQUZILEdBdkJEO0FBMkJYQyxXQUFTO0FBQ1BILGVBQVcsZUFBS3ZCLElBQUwsQ0FBVUQsR0FBVixFQUFlSyxXQUFmO0FBREosR0EzQkU7QUE4Qlh1QixXQUFTO0FBQ1BDLFlBQVFqQixVQUREO0FBRVBZLGVBQVcsZUFBS3ZCLElBQUwsQ0FBVUQsR0FBVixFQUFlTyxXQUFmLENBRko7QUFHUHVCLGNBQVUsZUFBSzdCLElBQUwsQ0FBVUQsR0FBVixFQUFlTSxZQUFmO0FBSEgsR0E5QkU7QUFtQ1h5QixXQUFTO0FBQ1BDLG1CQUFlO0FBQ2JGLGdCQUFVLCtCQUFnQixlQUFLN0IsSUFBTCxDQUFVRCxHQUFWLEVBQWVNLFlBQWYsQ0FBaEI7QUFERztBQURSLEdBbkNFO0FBd0NYMkIsUUFBTTtBQUNKakMsU0FBSyxlQUFLQyxJQUFMLENBQVVELEdBQVYsRUFBZVcsVUFBZixFQUEyQixNQUEzQjtBQURELEdBeENLO0FBMkNYdUIsVUFBUTtBQUNOQyxhQUFTLGVBQUtsQyxJQUFMLENBQVVELEdBQVYsRUFBZVEsV0FBZixFQUE0QixNQUE1QixDQURIO0FBRU40QixZQUFRLGVBQUtuQyxJQUFMLENBQVVELEdBQVYsRUFBZVMsVUFBZixFQUEyQixPQUEzQixDQUZGO0FBR040QixjQUFVLGFBSEo7QUFJTkMsZ0JBQWEsSUFBRzVCLFVBQVcsR0FKckI7QUFLTlIsU0FBSyxlQUFLRCxJQUFMLENBQVVDLEdBQVYsRUFBZVEsVUFBZjtBQUxDLEdBM0NHO0FBa0RYNkIsT0FBSztBQUNIQyxVQUFNLFdBREg7QUFFSEMsaUJBQWEsSUFGVjtBQUdIQyxxQkFBaUI7QUFIZDtBQWxETSxDQUFiOztBQXlEQTdCLFNBQVMsNkJBQWNBLE1BQWQsQ0FBVDtBQUNBLDJCQUFZQSxNQUFaLEVBQW9CZCxJQUFwQjs7a0JBRWVjLE0iLCJmaWxlIjoiY29uZmlnLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHBhdGggZnJvbSAncGF0aCdcbmltcG9ydCB7IGFyZ3YgfSBmcm9tICd5YXJncydcbmltcG9ydCBsb2FkQ29uZmlncyBmcm9tICcuL2xpYi9sb2FkLWNvbmZpZ3MnXG5pbXBvcnQgcmVhZFBhcnRpYWxzRGlyIGZyb20gJy4vbGliL3JlYWQtcGFydGlhbHMtZGlyJ1xuaW1wb3J0IHdlYnBhY2tDb25maWcgZnJvbSAnLi9jb25maWctd2VicGFjaydcblxuY29uc3QgaXNHdWxwRGVidWcgPSBwcm9jZXNzLmVudi5HVUxQX0RFQlVHID09PSAndHJ1ZSdcbmNvbnN0IGlzUHJvZHVjdGlvbiA9IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbidcbmNvbnN0IGlzRGV2ZWxvcG1lbnQgPSAhaXNQcm9kdWN0aW9uXG5cbmNvbnN0IHJvb3QgPSBhcmd2LnJvb3RcbmNvbnN0IHNyYyA9IHBhdGguam9pbihyb290LCAnc3JjJylcbmNvbnN0IGRzdCA9IHBhdGguam9pbihyb290LCAnYnVpbGQnKVxuXG5jb25zdCBESVJfUEFHRVMgPSAncGFnZXMnXG5jb25zdCBESVJfQ09OVEVOVCA9ICdjb250ZW50J1xuY29uc3QgRElSX0hFTFBFUlMgPSAnaGVscGVycydcbmNvbnN0IERJUl9QQVJUSUFMUyA9ICdwYXJ0aWFscydcbmNvbnN0IERJUl9MQVlPVVRTID0gJ2xheW91dHMnXG5jb25zdCBESVJfU0NSSVBUUyA9ICdzY3JpcHRzJ1xuY29uc3QgRElSX1NUWUxFUyA9ICdzdHlsZXMnXG5jb25zdCBESVJfQVNTRVRTID0gJ2Fzc2V0cydcbmNvbnN0IERJUl9QVUJMSUMgPSAncHVibGljJ1xuY29uc3QgVFBMX0VOR0lORSA9ICdoYW5kbGViYXJzJ1xuXG5sZXQgY29uZmlnID0ge1xuICBpc0d1bHBEZWJ1ZyxcbiAgaXNQcm9kdWN0aW9uLFxuICBpc0RldmVsb3BtZW50LFxuICBwYXRoczoge1xuICAgIHJvb3QsXG4gICAgc3JjLFxuICAgIGRzdCxcbiAgICBzcmNTY3JpcHRzOiBwYXRoLmpvaW4oc3JjLCBESVJfU0NSSVBUUylcbiAgfSxcbiAgaHRtbG1pbjoge1xuICAgIHNyYzogJyouaHRtbCcsXG4gICAgb3B0aW9uczoge1xuICAgICAgY29sbGFwc2VXaGl0ZXNwYWNlOiB0cnVlLFxuICAgICAgcmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlczogdHJ1ZSxcbiAgICAgIGNvbGxhcHNlQm9vbGVhbkF0dHJpYnV0ZXM6IHRydWUsXG4gICAgICBtaW5pZnlKUzogdHJ1ZSxcbiAgICAgIHNvcnRBdHRyaWJ1dGVzOiB0cnVlXG4gICAgfVxuICB9LFxuICBwYWdlczoge1xuICAgIGRpcmVjdG9yeTogcGF0aC5qb2luKHNyYywgRElSX1BBR0VTKVxuICB9LFxuICBjb250ZW50RGlyOiB7XG4gICAgZGlyZWN0b3J5OiBwYXRoLmpvaW4oc3JjLCBESVJfQ09OVEVOVCksXG4gICAgdHJhbnNmb3JtZXI6ICd3b3JkcHJlc3MnXG4gIH0sXG4gIGhlbHBlcnM6IHtcbiAgICBkaXJlY3Rvcnk6IHBhdGguam9pbihzcmMsIERJUl9IRUxQRVJTKVxuICB9LFxuICBsYXlvdXRzOiB7XG4gICAgZW5naW5lOiBUUExfRU5HSU5FLFxuICAgIGRpcmVjdG9yeTogcGF0aC5qb2luKHNyYywgRElSX0xBWU9VVFMpLFxuICAgIHBhcnRpYWxzOiBwYXRoLmpvaW4oc3JjLCBESVJfUEFSVElBTFMpXG4gIH0sXG4gIGlucGxhY2U6IHtcbiAgICBlbmdpbmVPcHRpb25zOiB7XG4gICAgICBwYXJ0aWFsczogcmVhZFBhcnRpYWxzRGlyKHBhdGguam9pbihzcmMsIERJUl9QQVJUSUFMUykpXG4gICAgfVxuICB9LFxuICBjb3B5OiB7XG4gICAgc3JjOiBwYXRoLmpvaW4oc3JjLCBESVJfUFVCTElDLCAnKiovKicpXG4gIH0sXG4gIGFzc2V0czoge1xuICAgIHNjcmlwdHM6IHBhdGguam9pbihzcmMsIERJUl9TQ1JJUFRTLCAnKi5qcycpLFxuICAgIHN0eWxlczogcGF0aC5qb2luKHNyYywgRElSX1NUWUxFUywgJyouY3NzJyksXG4gICAgbWFuaWZlc3Q6ICdhc3NldHMuanNvbicsXG4gICAgcHVibGljUGF0aDogYC8ke0RJUl9BU1NFVFN9L2AsXG4gICAgZHN0OiBwYXRoLmpvaW4oZHN0LCBESVJfQVNTRVRTKVxuICB9LFxuICBkZXY6IHtcbiAgICBob3N0OiAnbG9jYWxob3N0JyxcbiAgICB3ZWJwYWNrUG9ydDogOTAwMCxcbiAgICBicm93c2Vyc3luY1BvcnQ6IDMwMDBcbiAgfVxufVxuXG5jb25maWcgPSB3ZWJwYWNrQ29uZmlnKGNvbmZpZylcbmxvYWRDb25maWdzKGNvbmZpZywgcm9vdClcblxuZXhwb3J0IGRlZmF1bHQgY29uZmlnXG4iXX0=