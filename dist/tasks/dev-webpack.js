'use strict';

var _gulp = require('gulp');

var _gulp2 = _interopRequireDefault(_gulp);

var _gulpUtil = require('gulp-util');

var _gulpUtil2 = _interopRequireDefault(_gulpUtil);

var _webpack = require('webpack');

var _webpack2 = _interopRequireDefault(_webpack);

var _webpackDevServer = require('webpack-dev-server');

var _webpackDevServer2 = _interopRequireDefault(_webpackDevServer);

var _config = require('../config');

var _config2 = _interopRequireDefault(_config);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

_gulp2.default.task('dev-webpack', function (callback) {
  var compiler = (0, _webpack2.default)(_config2.default.webpack);
  var webpackDevServer = new _webpackDevServer2.default(compiler, {
    contentBase: _config2.default.paths.dst,
    publicPath: _config2.default.assets.publicPath,
    stats: {
      colors: true
    }
  });

  webpackDevServer.listen(_config2.default.dev.webpackPort, _config2.default.dev.host, function (err) {
    if (err) throw new _gulpUtil2.default.PluginError('webpack-dev-server', err);
  });

  webpackDevServer.middleware.waitUntilValid(function () {
    callback();
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy90YXNrcy9kZXYtd2VicGFjay5qcyJdLCJuYW1lcyI6WyJndWxwIiwidGFzayIsImNhbGxiYWNrIiwiY29tcGlsZXIiLCJjb25maWciLCJ3ZWJwYWNrIiwid2VicGFja0RldlNlcnZlciIsIldlYnBhY2tEZXZTZXJ2ZXIiLCJjb250ZW50QmFzZSIsInBhdGhzIiwiZHN0IiwicHVibGljUGF0aCIsImFzc2V0cyIsInN0YXRzIiwiY29sb3JzIiwibGlzdGVuIiwiZGV2Iiwid2VicGFja1BvcnQiLCJob3N0IiwiZXJyIiwiZ3V0aWwiLCJQbHVnaW5FcnJvciIsIm1pZGRsZXdhcmUiLCJ3YWl0VW50aWxWYWxpZCJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7Ozs7QUFFQUEsZUFBS0MsSUFBTCxDQUFVLGFBQVYsRUFBeUIsVUFBQ0MsUUFBRCxFQUFjO0FBQ3JDLE1BQU1DLFdBQVcsdUJBQVFDLGlCQUFPQyxPQUFmLENBQWpCO0FBQ0EsTUFBTUMsbUJBQW1CLElBQUlDLDBCQUFKLENBQXFCSixRQUFyQixFQUErQjtBQUN0REssaUJBQWFKLGlCQUFPSyxLQUFQLENBQWFDLEdBRDRCO0FBRXREQyxnQkFBWVAsaUJBQU9RLE1BQVAsQ0FBY0QsVUFGNEI7QUFHdERFLFdBQU87QUFDTEMsY0FBUTtBQURIO0FBSCtDLEdBQS9CLENBQXpCOztBQVFBUixtQkFBaUJTLE1BQWpCLENBQXdCWCxpQkFBT1ksR0FBUCxDQUFXQyxXQUFuQyxFQUFnRGIsaUJBQU9ZLEdBQVAsQ0FBV0UsSUFBM0QsRUFBaUUsVUFBQ0MsR0FBRCxFQUFTO0FBQ3hFLFFBQUlBLEdBQUosRUFBUyxNQUFNLElBQUlDLG1CQUFNQyxXQUFWLENBQXNCLG9CQUF0QixFQUE0Q0YsR0FBNUMsQ0FBTjtBQUNWLEdBRkQ7O0FBSUFiLG1CQUFpQmdCLFVBQWpCLENBQTRCQyxjQUE1QixDQUEyQyxZQUFNO0FBQy9DckI7QUFDRCxHQUZEO0FBR0QsQ0FqQkQiLCJmaWxlIjoiZGV2LXdlYnBhY2suanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZ3VscCBmcm9tICdndWxwJ1xuaW1wb3J0IGd1dGlsIGZyb20gJ2d1bHAtdXRpbCdcbmltcG9ydCB3ZWJwYWNrIGZyb20gJ3dlYnBhY2snXG5pbXBvcnQgV2VicGFja0RldlNlcnZlciBmcm9tICd3ZWJwYWNrLWRldi1zZXJ2ZXInXG5pbXBvcnQgY29uZmlnIGZyb20gJy4uL2NvbmZpZydcblxuZ3VscC50YXNrKCdkZXYtd2VicGFjaycsIChjYWxsYmFjaykgPT4ge1xuICBjb25zdCBjb21waWxlciA9IHdlYnBhY2soY29uZmlnLndlYnBhY2spXG4gIGNvbnN0IHdlYnBhY2tEZXZTZXJ2ZXIgPSBuZXcgV2VicGFja0RldlNlcnZlcihjb21waWxlciwge1xuICAgIGNvbnRlbnRCYXNlOiBjb25maWcucGF0aHMuZHN0LFxuICAgIHB1YmxpY1BhdGg6IGNvbmZpZy5hc3NldHMucHVibGljUGF0aCxcbiAgICBzdGF0czoge1xuICAgICAgY29sb3JzOiB0cnVlXG4gICAgfVxuICB9KVxuXG4gIHdlYnBhY2tEZXZTZXJ2ZXIubGlzdGVuKGNvbmZpZy5kZXYud2VicGFja1BvcnQsIGNvbmZpZy5kZXYuaG9zdCwgKGVycikgPT4ge1xuICAgIGlmIChlcnIpIHRocm93IG5ldyBndXRpbC5QbHVnaW5FcnJvcignd2VicGFjay1kZXYtc2VydmVyJywgZXJyKVxuICB9KVxuXG4gIHdlYnBhY2tEZXZTZXJ2ZXIubWlkZGxld2FyZS53YWl0VW50aWxWYWxpZCgoKSA9PiB7XG4gICAgY2FsbGJhY2soKVxuICB9KVxufSlcbiJdfQ==