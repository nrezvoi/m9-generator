'use strict';

var _gulp = require('gulp');

var _gulp2 = _interopRequireDefault(_gulp);

var _gulpUtil = require('gulp-util');

var _gulpUtil2 = _interopRequireDefault(_gulpUtil);

var _webpack = require('webpack');

var _webpack2 = _interopRequireDefault(_webpack);

var _webpackDevServer = require('webpack-dev-server');

var _webpackDevServer2 = _interopRequireDefault(_webpackDevServer);

var _config = require('../config');

var _config2 = _interopRequireDefault(_config);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

_gulp2.default.task('dev-webpack', callback => {
  const compiler = (0, _webpack2.default)(_config2.default.webpack);
  const webpackDevServer = new _webpackDevServer2.default(compiler, {
    contentBase: _config2.default.paths.dst,
    publicPath: _config2.default.assets.publicPath,
    stats: {
      colors: true
    }
  });

  webpackDevServer.listen(_config2.default.dev.webpackPort, _config2.default.dev.host, err => {
    if (err) throw new _gulpUtil2.default.PluginError('webpack-dev-server', err);
  });

  webpackDevServer.middleware.waitUntilValid(() => {
    callback();
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy90YXNrcy9kZXYtd2VicGFjay5qcyJdLCJuYW1lcyI6WyJ0YXNrIiwiY2FsbGJhY2siLCJjb21waWxlciIsIndlYnBhY2siLCJ3ZWJwYWNrRGV2U2VydmVyIiwiY29udGVudEJhc2UiLCJwYXRocyIsImRzdCIsInB1YmxpY1BhdGgiLCJhc3NldHMiLCJzdGF0cyIsImNvbG9ycyIsImxpc3RlbiIsImRldiIsIndlYnBhY2tQb3J0IiwiaG9zdCIsImVyciIsIlBsdWdpbkVycm9yIiwibWlkZGxld2FyZSIsIndhaXRVbnRpbFZhbGlkIl0sIm1hcHBpbmdzIjoiOztBQUFBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7OztBQUVBLGVBQUtBLElBQUwsQ0FBVSxhQUFWLEVBQTBCQyxRQUFELElBQWM7QUFDckMsUUFBTUMsV0FBVyx1QkFBUSxpQkFBT0MsT0FBZixDQUFqQjtBQUNBLFFBQU1DLG1CQUFtQiwrQkFBcUJGLFFBQXJCLEVBQStCO0FBQ3RERyxpQkFBYSxpQkFBT0MsS0FBUCxDQUFhQyxHQUQ0QjtBQUV0REMsZ0JBQVksaUJBQU9DLE1BQVAsQ0FBY0QsVUFGNEI7QUFHdERFLFdBQU87QUFDTEMsY0FBUTtBQURIO0FBSCtDLEdBQS9CLENBQXpCOztBQVFBUCxtQkFBaUJRLE1BQWpCLENBQXdCLGlCQUFPQyxHQUFQLENBQVdDLFdBQW5DLEVBQWdELGlCQUFPRCxHQUFQLENBQVdFLElBQTNELEVBQWtFQyxHQUFELElBQVM7QUFDeEUsUUFBSUEsR0FBSixFQUFTLE1BQU0sSUFBSSxtQkFBTUMsV0FBVixDQUFzQixvQkFBdEIsRUFBNENELEdBQTVDLENBQU47QUFDVixHQUZEOztBQUlBWixtQkFBaUJjLFVBQWpCLENBQTRCQyxjQUE1QixDQUEyQyxNQUFNO0FBQy9DbEI7QUFDRCxHQUZEO0FBR0QsQ0FqQkQiLCJmaWxlIjoiZGV2LXdlYnBhY2suanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZ3VscCBmcm9tICdndWxwJ1xuaW1wb3J0IGd1dGlsIGZyb20gJ2d1bHAtdXRpbCdcbmltcG9ydCB3ZWJwYWNrIGZyb20gJ3dlYnBhY2snXG5pbXBvcnQgV2VicGFja0RldlNlcnZlciBmcm9tICd3ZWJwYWNrLWRldi1zZXJ2ZXInXG5pbXBvcnQgY29uZmlnIGZyb20gJy4uL2NvbmZpZydcblxuZ3VscC50YXNrKCdkZXYtd2VicGFjaycsIChjYWxsYmFjaykgPT4ge1xuICBjb25zdCBjb21waWxlciA9IHdlYnBhY2soY29uZmlnLndlYnBhY2spXG4gIGNvbnN0IHdlYnBhY2tEZXZTZXJ2ZXIgPSBuZXcgV2VicGFja0RldlNlcnZlcihjb21waWxlciwge1xuICAgIGNvbnRlbnRCYXNlOiBjb25maWcucGF0aHMuZHN0LFxuICAgIHB1YmxpY1BhdGg6IGNvbmZpZy5hc3NldHMucHVibGljUGF0aCxcbiAgICBzdGF0czoge1xuICAgICAgY29sb3JzOiB0cnVlXG4gICAgfVxuICB9KVxuXG4gIHdlYnBhY2tEZXZTZXJ2ZXIubGlzdGVuKGNvbmZpZy5kZXYud2VicGFja1BvcnQsIGNvbmZpZy5kZXYuaG9zdCwgKGVycikgPT4ge1xuICAgIGlmIChlcnIpIHRocm93IG5ldyBndXRpbC5QbHVnaW5FcnJvcignd2VicGFjay1kZXYtc2VydmVyJywgZXJyKVxuICB9KVxuXG4gIHdlYnBhY2tEZXZTZXJ2ZXIubWlkZGxld2FyZS53YWl0VW50aWxWYWxpZCgoKSA9PiB7XG4gICAgY2FsbGJhY2soKVxuICB9KVxufSlcbiJdfQ==